═══════════════════════════════════════════════════════════════════════════════
                    TRUTHBOARD - DEPLOYMENT SUMMARY
═══════════════════════════════════════════════════════════════════════════════

PROJECT STRUCTURE
─────────────────
Frontend:  /frontend (Next.js 14)
Backend:   /backend  (FastAPI)
Database:  PostgreSQL


DEPLOYMENT ARCHITECTURE
───────────────────────
┌────────────────────────────────────────────────────────────────┐
│                                                                │
│  VERCEL (Frontend)                  RENDER (Backend + DB)     │
│  ──────────────────                 ──────────────────────    │
│                                                                │
│  truthboard.vercel.app  ──API calls──> truthboard-api         │
│  (Next.js)                           (FastAPI)                │
│                                                                │
│                         ┌────────────────────┐                │
│                         │  PostgreSQL        │                │
│                         │  truthboard-db     │                │
│                         │  (1 GB free)       │                │
│                         └────────────────────┘                │
│                                                                │
└────────────────────────────────────────────────────────────────┘


COST BREAKDOWN
──────────────
Service              Plan      Cost/Month
────────────────────────────────────────
Vercel (Frontend)    Free      $0
Render (API)         Free      $0
Render (PostgreSQL)  Free      $0
──────────────────────────────────────
TOTAL                          $0/MONTH ✅


QUICK START (25 MINUTES)
────────────────────────

1. CREATE DATABASE (2 min)
   └─ Render → PostgreSQL → Free tier
   └─ Copy connection string

2. DEPLOY BACKEND (10 min)
   └─ Render → Web Service → Docker
   └─ Connect GitHub → Select /backend
   └─ Set DATABASE_URL env var
   └─ Save API URL

3. UPDATE FRONTEND CONFIG (2 min)
   └─ Create frontend/.env.production
   └─ Add NEXT_PUBLIC_API_URL
   └─ Push to GitHub

4. DEPLOY FRONTEND (5 min)
   └─ Vercel → New Project → Import
   └─ Select GitHub repo
   └─ Set root to /frontend
   └─ Add env vars

5. CONNECT (2 min)
   └─ Update backend ALLOWED_ORIGINS
   └─ Wait for redeploy

6. VERIFY (3 min)
   └─ curl https://truthboard-api.onrender.com/health
   └─ Visit https://truthboard.vercel.app
   └─ Test all pages


EXACT ENVIRONMENT VARIABLES
────────────────────────────

RENDER BACKEND (Environment Variables)
──────────────────────────────────────
DATABASE_URL=postgresql://user:password@host:5432/truthboard
ALLOWED_ORIGINS=https://truthboard.vercel.app
ENABLE_SCHEDULER=false
PYTHONUNBUFFERED=1


VERCEL FRONTEND (Environment Variables)
────────────────────────────────────────
NEXT_PUBLIC_API_URL=https://truthboard-api.onrender.com
INTERNAL_API_URL=https://truthboard-api.onrender.com


CRITICAL SETTINGS
──────────────────

✅ Backend Root Directory: backend
✅ Frontend Root Directory: frontend
✅ Build Command (Frontend): npm run build
✅ Start Command (Backend): uvicorn app.main:app --host 0.0.0.0 --port 8000
✅ Database Plan: FREE (1 GB)
✅ Backend Plan: FREE
✅ Frontend Plan: FREE


URLS AFTER DEPLOYMENT
──────────────────────
Frontend:      https://truthboard.vercel.app
Backend API:   https://truthboard-api.onrender.com
API Health:    https://truthboard-api.onrender.com/health
API Docs:      https://truthboard-api.onrender.com/docs


KEEP-ALIVE SETUP (FREE TIER SLEEPS AFTER 15 MIN)
──────────────────────────────────────────────────
Use UptimeRobot (free):
1. Sign up at https://uptimerobot.com
2. Add monitor: https://truthboard-api.onrender.com/health
3. Interval: 30 minutes
4. Done!

Alternative: Add cron job if you have a server


TESTING COMMANDS
────────────────
# Backend health
curl https://truthboard-api.onrender.com/health

# Get events
curl "https://truthboard-api.onrender.com/events?status=confirmed&politics_only=true&limit=2"

# Check frontend loads
curl https://truthboard.vercel.app | head -c 500


TROUBLESHOOTING
───────────────
Problem: Backend returns 500 errors
└─ Check: Render dashboard → truthboard-api → Logs
└─ Likely: DATABASE_URL wrong or database not ready

Problem: Frontend shows "Failed to fetch"
└─ Check: ALLOWED_ORIGINS includes Vercel domain
└─ Check: Backend URL in frontend env vars correct
└─ Check: curl health endpoint works

Problem: Takes very long to deploy
└─ Normal on free tier - wait 10-15 minutes

Problem: "Connection refused"
└─ Backend still deploying - wait and retry


UPGRADING (OPTIONAL)
────────────────────
Better Performance:
  └─ Render Web Service: $7/month (vs free)
  └─ Render PostgreSQL: $15/month + (vs 1 GB free)

Custom Domain:
  └─ Vercel: automatic HTTPS via Let's Encrypt
  └─ Render: same


POST-DEPLOYMENT MONITORING
──────────────────────────
Daily:
  └─ Check Vercel deployments page for errors
  └─ Check Render logs for API errors

Weekly:
  └─ Run health check curl commands
  └─ Verify UptimeRobot shows "Up"

Monthly:
  └─ Check database storage (Render Metrics)
  └─ If >500MB: Archive old events
  └─ Review cost (should be $0)


GITHUB SETUP
─────────────
Ensure you have committed:
  ✅ frontend/.env.production
  ✅ All code in main branch
  ✅ Both /frontend and /backend directories present


FULL DOCUMENTATION
───────────────────
See these files for detailed instructions:

1. DEPLOYMENT_GUIDE.md
   └─ Complete step-by-step guide with screenshots
   └─ Configuration options explained
   └─ Troubleshooting section

2. DEPLOYMENT_CHECKLIST.md
   └─ Quick reference checklist
   └─ Environment variables summary
   └─ Success indicators

3. DEPLOYMENT_COMMANDS.md
   └─ Copy-paste ready commands
   └─ All code snippets
   └─ Validation scripts


SUPPORT
────────
1. Check Render logs: https://dashboard.render.com
2. Check Vercel logs: https://vercel.com/dashboard
3. Test API directly: https://truthboard-api.onrender.com/docs
4. Check browser console: F12 on deployed site


FINAL CHECKLIST
────────────────
[ ] GitHub repo created and pushed
[ ] Render account created
[ ] Vercel account created
[ ] PostgreSQL database created in Render
[ ] Backend deployed to Render
[ ] frontend/.env.production created
[ ] Frontend deployed to Vercel
[ ] ALLOWED_ORIGINS updated in backend
[ ] Health check passing (curl works)
[ ] Frontend loads without errors
[ ] Search functionality works
[ ] UptimeRobot configured
[ ] All pages tested (home, developing, conflicts, stats)


═══════════════════════════════════════════════════════════════════════════════
                            READY TO DEPLOY! ✅
═══════════════════════════════════════════════════════════════════════════════

Total Cost:        $0/month
Deployment Time:   ~25 minutes
Maintenance Time:  ~5 minutes/week

Good luck! 🚀
